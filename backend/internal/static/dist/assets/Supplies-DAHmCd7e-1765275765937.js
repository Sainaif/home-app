import{c as ee,j as xe,r as i,l as X,o as Le,A as m,C as ue,b as a,e as t,g as p,t as s,u as d,f as v,v as h,K as Ne,n as A,L as re,q as u,E as C,y as _,p as x,F as z,h as M,X as Z,J as Ue,d as l,s as de}from"./index-64eViR4o-1765275765937.js";import{u as De,D as $}from"./useDataEvents-DJW-Q2vS-1765275765937.js";import{P as pe}from"./plus-ChDWFuxc-1765275765937.js";import{C as Se}from"./circle-alert-uQjA8Mrg-1765275765937.js";import{S as Ae,T as Re}from"./trash-DZTKBGU9-1765275765937.js";/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=ee("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=ee("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-vue-next v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=ee("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Ie={class:"flex items-center justify-between mb-8"},Qe={class:"text-3xl font-bold"},ze={class:"card mb-6"},Me={class:"flex items-center justify-between"},Ve={class:"text-sm text-gray-400 mb-1"},Fe={class:"text-3xl font-bold gradient-text"},qe={class:"text-right"},Be={class:"text-sm text-gray-400 mb-1"},Ye={class:"text-lg font-semibold"},He={class:"flex gap-2 mb-6 overflow-x-auto"},Je={key:0,class:"ml-1 bg-red-600 text-white text-xs px-2 py-0.5 rounded-full"},Ke={key:0},We={class:"card mb-6"},Xe={class:"flex flex-wrap gap-3 items-center"},Ge={value:""},Oe={value:"low_stock"},Ze={value:"needs_refund"},et={value:""},tt={value:"name"},st={value:"quantity_asc"},nt={value:"recently_restocked"},ot=["placeholder"],lt={class:"card mb-6"},at={class:"text-lg font-semibold mb-4"},it={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ut=["placeholder"],rt={value:"groceries"},dt={value:"cleaning"},pt={value:"toiletries"},ct={value:"other"},mt={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},vt=["placeholder"],yt=["placeholder"],bt={value:"pcs"},ft={value:"kg"},gt={value:"L"},ht={value:"bottles"},_t={value:"boxes"},$t={value:"rolls"},kt={value:"bags"},wt={value:"jars"},Pt={value:"cans"},Ct=["disabled"],xt={key:0,class:"text-center py-8"},Lt={key:1,class:"text-center py-8 text-gray-400"},Nt={key:2,class:"space-y-3"},Ut={class:"flex items-start justify-between gap-4"},Dt={class:"flex-1 min-w-0"},St={class:"flex items-center gap-2 mb-2"},At={class:"font-semibold text-lg truncate"},Rt={class:"flex items-center gap-4 mb-2"},Tt={class:"flex items-center gap-2"},Et={class:"text-3xl font-bold"},jt={class:"text-gray-400"},It={class:"text-sm text-gray-400"},Qt={class:"text-sm text-gray-400 space-y-1"},zt={key:0},Mt={key:0},Vt={class:"flex flex-col gap-2 flex-shrink-0"},Ft=["onClick"],qt=["onClick","disabled"],Bt=["onClick"],Yt=["onClick"],Ht={key:1},Jt={key:0,class:"text-center py-8"},Kt={key:1,class:"text-center py-8 text-gray-400"},Wt={key:2,class:"space-y-3"},Xt={class:"flex-1"},Gt={class:"flex items-center gap-2 mb-2"},Ot={class:"font-semibold text-lg"},Zt={class:"text-sm text-gray-400"},es={class:"text-lg font-semibold text-yellow-400 mt-1"},ts=["onClick"],ss={class:"card bg-gray-800/50"},ns={class:"flex items-center justify-between"},os={class:"text-lg font-semibold"},ls={class:"text-2xl font-bold text-yellow-400"},as={key:2},is={key:0,class:"text-center py-8"},us={key:1,class:"space-y-6"},rs={class:"card"},ds={class:"text-lg font-semibold mb-4"},ps={key:0,class:"space-y-3"},cs={class:"flex items-center gap-2"},ms={class:"capitalize"},vs={class:"font-semibold"},ys={key:1,class:"text-gray-400"},bs={class:"card"},fs={class:"text-lg font-semibold mb-4"},gs={key:0,class:"space-y-3"},hs={class:"font-semibold"},_s={key:1,class:"text-gray-400"},$s={class:"card"},ks={class:"text-lg font-semibold mb-4"},ws={key:0,class:"space-y-3"},Ps={class:"text-sm text-gray-400"},Cs={class:"font-semibold text-green-400"},xs={key:1,class:"text-gray-400"},Ls={class:"card max-w-lg w-full mx-4"},Ns={class:"flex justify-between items-center mb-6"},Us={class:"text-2xl font-bold"},Ds={class:"block text-sm font-medium mb-2"},Ss={class:"block text-sm font-medium mb-2"},As={value:"monday"},Rs={value:"tuesday"},Ts={value:"wednesday"},Es={value:"thursday"},js={value:"friday"},Is={value:"saturday"},Qs={value:"sunday"},zs={class:"block text-sm font-medium mb-2"},Ms={class:"flex gap-2"},Vs={class:"text-xs text-gray-400 mt-1"},Fs={key:0,class:"text-red-500 text-sm"},qs={class:"flex gap-3"},Bs=["disabled"],Ys={class:"card max-w-md w-full mx-4"},Hs={class:"flex justify-between items-center mb-6"},Js={class:"text-xl font-bold"},Ks={class:"block text-sm font-medium mb-2"},Ws={class:"block text-sm font-medium mb-2"},Xs={class:"flex items-center gap-2"},Gs={for:"needsRefund",class:"text-sm"},Os={class:"flex gap-3"},Zs=["disabled"],en={class:"card max-w-md w-full mx-4"},tn={class:"flex justify-between items-center mb-6"},sn={class:"text-xl font-bold"},nn={class:"block text-sm font-medium mb-2"},on={class:"block text-sm font-medium mb-2"},ln={value:"groceries"},an={value:"cleaning"},un={value:"toiletries"},rn={value:"other"},dn={class:"grid grid-cols-2 gap-3"},pn={class:"block text-sm font-medium mb-2"},cn={class:"block text-sm font-medium mb-2"},mn={value:"pcs"},vn={value:"kg"},yn={value:"L"},bn={value:"bottles"},fn={value:"boxes"},gn={value:"rolls"},hn={value:"bags"},_n={value:"jars"},$n={value:"cans"},kn={class:"flex gap-3"},wn=["disabled"],Dn={__name:"Supplies",setup(Pn){const te=xe(),{on:V,emit:L}=De(),f=i("inventory"),R=i([]),y=i(null),G=i(null),se=i([]),T=i(!1),O=i(!1),ne=i(!1),E=i(""),j=i(""),F=i(""),N=i(!1),U=i(!1),D=i(!1),k=i(null),r=i({name:"",category:"groceries",currentQuantity:0,minQuantity:1,unit:"pcs"}),w=i({weeklyContributionPLN:10,contributionDay:"monday"}),g=i({quantityToAdd:1,amountPLN:null,needsRefund:!1}),c=i({name:"",category:"",minQuantity:0,unit:""}),S=i(0),q=i(!1),B=i(!1),Y=i(!1),H=i(""),oe=X(()=>{let e=R.value;if(F.value){const o=F.value.toLowerCase();e=e.filter(n=>n.name.toLowerCase().includes(o))}return e}),J=X(()=>R.value.filter(e=>e.needsRefund)),le=X(()=>J.value.length),ce=X(()=>J.value.reduce((e,o)=>{const n=o.lastRestockAmountPLN?parseFloat(o.lastRestockAmountPLN.$numberDecimal||o.lastRestockAmountPLN||0):0;return e+n},0).toFixed(2));Le(async()=>{await Promise.all([I(),b(),ae()]),V($.SUPPLY_ITEM_CREATED,b),V($.SUPPLY_ITEM_UPDATED,b),V($.SUPPLY_ITEM_DELETED,b),V($.USER_UPDATED,ae)});async function I(){ne.value=!0;try{const e=await m.get("/supplies/settings");G.value=e.data,w.value={weeklyContributionPLN:parseFloat(e.data.weeklyContributionPLN.$numberDecimal||e.data.weeklyContributionPLN||10),contributionDay:e.data.contributionDay||"monday"}}catch(e){console.error("Failed to load supply settings:",e)}finally{ne.value=!1}}async function b(){T.value=!0;try{const e={};E.value&&(e.filter=E.value),j.value&&(e.sort=j.value);const o=await m.get("/supplies/items",{params:e});R.value=o.data||[]}catch(e){console.error("Failed to load supply items:",e),R.value=[]}finally{T.value=!1}}async function me(){O.value=!0;try{const e=await m.get("/supplies/stats");y.value=e.data}catch(e){console.error("Failed to load supply stats:",e)}finally{O.value=!1}}async function ae(){try{const e=await m.get("/users");se.value=e.data||[]}catch(e){console.error("Failed to load users:",e)}}async function ve(){try{await m.post("/supplies/items",{name:r.value.name,category:r.value.category,currentQuantity:r.value.currentQuantity,minQuantity:r.value.minQuantity,unit:r.value.unit}),r.value={name:"",category:"groceries",currentQuantity:0,minQuantity:1,unit:"pcs"},await b(),L($.SUPPLY_ITEM_CREATED)}catch(e){console.error("Failed to add item:",e),alert("Nie udało się dodać przedmiotu: "+(e.response?.data?.error||e.message))}}function ye(e){k.value=e,g.value={quantityToAdd:1,amountPLN:null,needsRefund:!1},U.value=!0}async function be(){if(k.value){B.value=!0;try{await m.post(`/supplies/items/${k.value.id}/restock`,{quantityToAdd:g.value.quantityToAdd,amountPLN:g.value.amountPLN||void 0,needsRefund:g.value.needsRefund}),U.value=!1,k.value=null,await Promise.all([b(),I()]),L($.SUPPLY_ITEM_UPDATED)}catch(e){console.error("Failed to restock:",e),alert("Nie udało się uzupełnić zapasów: "+(e.response?.data?.error||e.message))}finally{B.value=!1}}}async function fe(e){const o=prompt(`Ile ${e.unit} zużyto?`,"1");if(!(!o||o<=0))try{await m.post(`/supplies/items/${e.id}/consume`,{quantityToSubtract:parseInt(o)}),await b(),L($.SUPPLY_ITEM_UPDATED)}catch(n){console.error("Failed to consume:",n),alert("Nie udało się zmniejszyć ilości: "+(n.response?.data?.error||n.message))}}function ge(e){k.value=e,c.value={name:e.name,category:e.category,minQuantity:e.minQuantity,unit:e.unit},D.value=!0}async function he(){if(k.value){Y.value=!0;try{await m.patch(`/supplies/items/${k.value.id}`,{name:c.value.name,category:c.value.category,minQuantity:c.value.minQuantity,unit:c.value.unit}),D.value=!1,k.value=null,await b(),L($.SUPPLY_ITEM_UPDATED)}catch(e){console.error("Failed to edit item:",e),alert("Nie udało się edytować przedmiotu: "+(e.response?.data?.error||e.message))}finally{Y.value=!1}}}async function _e(e){if(confirm("Czy na pewno chcesz usunąć ten przedmiot?"))try{await m.delete(`/supplies/items/${e}`),await b(),L($.SUPPLY_ITEM_DELETED)}catch(o){console.error("Failed to delete item:",o),alert("Nie udało się usunąć przedmiotu: "+(o.response?.data?.error||o.message))}}async function $e(e){if(confirm("Czy na pewno chcesz oznaczyć jako zwrócone?"))try{await m.post(`/supplies/items/${e}/refund`),await Promise.all([b(),I()]),L($.SUPPLY_ITEM_UPDATED)}catch(o){console.error("Failed to mark as refunded:",o),alert("Nie udało się oznaczyć jako zwrócone: "+(o.response?.data?.error||o.message))}}async function ke(){q.value=!0,H.value="";try{await m.patch("/supplies/settings",{weeklyContributionPLN:w.value.weeklyContributionPLN,contributionDay:w.value.contributionDay}),N.value=!1,await I()}catch(e){console.error("Failed to save settings:",e),H.value=e.response?.data?.error||"Nie udało się zapisać ustawień"}finally{q.value=!1}}async function we(){if(!(!S.value||S.value===0))try{await m.post("/supplies/settings/adjust",{adjustment:S.value}),S.value=0,await I()}catch(e){console.error("Failed to adjust budget:",e),alert("Nie udało się dostosować budżetu: "+(e.response?.data?.error||e.message))}}function Q(e){const o=se.value.find(n=>n.id===e);return o?o.name:"Nieznany"}function P(e){return e?parseFloat(typeof e=="object"&&e.$numberDecimal||e).toFixed(2):"0.00"}function K(e){return e?new Date(e).toLocaleDateString("pl-PL",{day:"numeric",month:"short",year:"numeric"}):""}function Pe(e){return e.currentQuantity<=e.minQuantity}function ie(e){const o={groceries:"bg-green-600/20 text-green-400",cleaning:"bg-blue-600/20 text-blue-400",toiletries:"bg-purple-600/20 text-purple-400",other:"bg-gray-600/20 text-gray-400"};return o[e]||o.other}function Ce(e){const o={groceries:"bg-green-500",cleaning:"bg-blue-500",toiletries:"bg-purple-500",other:"bg-gray-500"};return o[e]||o.other}return ue([E,j],()=>{b()}),ue(f,e=>{e==="stats"&&!y.value&&me()}),(e,o)=>(l(),a("div",null,[t("div",Ie,[t("h1",Qe,s(e.$t("supplies.title")),1),d(te).isAdmin?(l(),a("button",{key:0,onClick:o[0]||(o[0]=n=>N.value=!0),class:"btn btn-outline flex items-center gap-2"},[v(d(Ne),{class:"w-4 h-4"}),h(" "+s(e.$t("supplies.settings")),1)])):p("",!0)]),t("div",ze,[t("div",Me,[t("div",null,[t("p",Ve,s(e.$t("supplies.currentBudget")),1),t("p",Fe,s(P(G.value?.currentBudgetPLN))+" PLN",1)]),t("div",qe,[t("p",Be,s(e.$t("supplies.weeklyContribution")),1),t("p",Ye,s(P(G.value?.weeklyContributionPLN))+" PLN / "+s(e.$t("supplies.perPerson")),1)])])]),t("div",He,[t("button",{onClick:o[1]||(o[1]=n=>f.value="inventory"),class:A(["btn",f.value==="inventory"?"btn-primary":"btn-outline"])},[v(d(Ee),{class:"w-4 h-4 mr-2"}),h(" "+s(e.$t("supplies.inventory")),1)],2),t("button",{onClick:o[2]||(o[2]=n=>f.value="refunds"),class:A(["btn",f.value==="refunds"?"btn-primary":"btn-outline"])},[v(d(re),{class:"w-4 h-4 mr-2"}),h(" "+s(e.$t("supplies.refunds"))+" ",1),le.value>0?(l(),a("span",Je,s(le.value),1)):p("",!0)],2),t("button",{onClick:o[3]||(o[3]=n=>f.value="stats"),class:A(["btn",f.value==="stats"?"btn-primary":"btn-outline"])},[v(d(je),{class:"w-4 h-4 mr-2"}),h(" "+s(e.$t("supplies.stats")),1)],2)]),f.value==="inventory"?(l(),a("div",Ke,[t("div",We,[t("div",Xe,[u(t("select",{"onUpdate:modelValue":o[4]||(o[4]=n=>E.value=n),class:"input flex-1 min-w-[150px]"},[t("option",Ge,s(e.$t("supplies.filters.all")),1),t("option",Oe,s(e.$t("supplies.filters.lowStock")),1),t("option",Ze,s(e.$t("supplies.filters.needsRefund")),1)],512),[[C,E.value]]),u(t("select",{"onUpdate:modelValue":o[5]||(o[5]=n=>j.value=n),class:"input flex-1 min-w-[150px]"},[t("option",et,s(e.$t("supplies.sorting.default")),1),t("option",tt,s(e.$t("supplies.sorting.name")),1),t("option",st,s(e.$t("supplies.sorting.quantityLow")),1),t("option",nt,s(e.$t("supplies.sorting.recentlyRestocked")),1)],512),[[C,j.value]]),u(t("input",{"onUpdate:modelValue":o[6]||(o[6]=n=>F.value=n),type:"text",placeholder:e.$t("supplies.search"),class:"input flex-1 min-w-[200px]"},null,8,ot),[[_,F.value]])])]),t("div",lt,[t("h3",at,s(e.$t("supplies.addItem")),1),t("form",{onSubmit:x(ve,["prevent"]),class:"space-y-3"},[t("div",it,[u(t("input",{"onUpdate:modelValue":o[7]||(o[7]=n=>r.value.name=n),type:"text",placeholder:e.$t("supplies.itemName"),required:"",class:"input"},null,8,ut),[[_,r.value.name]]),u(t("select",{"onUpdate:modelValue":o[8]||(o[8]=n=>r.value.category=n),class:"input"},[t("option",rt,s(e.$t("supplies.categories.groceries")),1),t("option",dt,s(e.$t("supplies.categories.cleaning")),1),t("option",pt,s(e.$t("supplies.categories.toiletries")),1),t("option",ct,s(e.$t("supplies.categories.other")),1)],512),[[C,r.value.category]])]),t("div",mt,[u(t("input",{"onUpdate:modelValue":o[9]||(o[9]=n=>r.value.currentQuantity=n),type:"number",min:"0",placeholder:e.$t("supplies.currentQty"),required:"",class:"input"},null,8,vt),[[_,r.value.currentQuantity,void 0,{number:!0}]]),u(t("input",{"onUpdate:modelValue":o[10]||(o[10]=n=>r.value.minQuantity=n),type:"number",min:"0",placeholder:e.$t("supplies.minQty"),required:"",class:"input"},null,8,yt),[[_,r.value.minQuantity,void 0,{number:!0}]]),u(t("select",{"onUpdate:modelValue":o[11]||(o[11]=n=>r.value.unit=n),class:"input"},[t("option",bt,s(e.$t("supplies.units.pcs")),1),t("option",ft,s(e.$t("supplies.units.kg")),1),t("option",gt,s(e.$t("supplies.units.L")),1),t("option",ht,s(e.$t("supplies.units.bottles")),1),t("option",_t,s(e.$t("supplies.units.boxes")),1),t("option",$t,s(e.$t("supplies.units.rolls")),1),t("option",kt,s(e.$t("supplies.units.bags")),1),t("option",wt,s(e.$t("supplies.units.jars")),1),t("option",Pt,s(e.$t("supplies.units.cans")),1)],512),[[C,r.value.unit]]),t("button",{type:"submit",disabled:T.value,class:"btn btn-primary flex items-center justify-center gap-2 font-semibold"},[v(d(pe),{class:"w-5 h-5"}),h(" "+s(e.$t("supplies.add")),1)],8,Ct)])],32)]),T.value&&R.value.length===0?(l(),a("div",xt,s(e.$t("common.loading")),1)):oe.value.length===0?(l(),a("div",Lt,s(e.$t("supplies.noItems")),1)):(l(),a("div",Nt,[(l(!0),a(z,null,M(oe.value,n=>(l(),a("div",{key:n.id,class:"card"},[t("div",Ut,[t("div",Dt,[t("div",St,[t("h3",At,s(n.name),1),t("span",{class:A(["text-xs px-2 py-0.5 rounded-full",ie(n.category)])},s(e.$t(`supplies.categories.${n.category}`)),3),Pe(n)?(l(),de(d(Se),{key:0,class:"w-5 h-5 text-red-500",title:e.$t("supplies.lowStockWarning")},null,8,["title"])):p("",!0),n.needsRefund?(l(),de(d(re),{key:1,class:"w-5 h-5 text-yellow-500",title:e.$t("supplies.needsRefund")},null,8,["title"])):p("",!0)]),t("div",Rt,[t("div",Tt,[t("span",Et,s(n.currentQuantity),1),t("span",jt,s(e.$t(`supplies.units.${n.unit}`)),1)]),t("span",It,s(e.$t("supplies.min"))+": "+s(n.minQuantity)+" "+s(e.$t(`supplies.units.${n.unit}`)),1)]),t("div",Qt,[t("div",null,s(e.$t("supplies.addedBy"))+": "+s(Q(n.addedByUserId))+" • "+s(K(n.addedAt)),1),n.lastRestockedAt?(l(),a("div",zt,[h(s(e.$t("supplies.lastRestock"))+": "+s(Q(n.lastRestockedByUserId))+" • "+s(K(n.lastRestockedAt))+" ",1),n.lastRestockAmountPLN?(l(),a("span",Mt,"• "+s(P(n.lastRestockAmountPLN))+" PLN",1)):p("",!0)])):p("",!0)])]),t("div",Vt,[t("button",{onClick:W=>ye(n),class:"btn btn-sm btn-primary flex items-center gap-1"},[v(d(pe),{class:"w-4 h-4"}),h(" "+s(e.$t("supplies.restock")),1)],8,Ft),t("button",{onClick:W=>fe(n),disabled:n.currentQuantity===0,class:"btn btn-sm btn-outline flex items-center gap-1"},[v(d(Te),{class:"w-4 h-4"}),h(" "+s(e.$t("supplies.consume")),1)],8,qt),t("button",{onClick:W=>ge(n),class:"btn btn-sm btn-outline flex items-center gap-1"},[v(d(Ae),{class:"w-4 h-4"}),h(" "+s(e.$t("common.edit")),1)],8,Bt),t("button",{onClick:W=>_e(n.id),class:"btn btn-sm btn-secondary flex items-center gap-1"},[v(d(Re),{class:"w-4 h-4"}),h(" "+s(e.$t("common.delete")),1)],8,Yt)])])]))),128))]))])):p("",!0),f.value==="refunds"?(l(),a("div",Ht,[T.value?(l(),a("div",Jt,s(e.$t("common.loading")),1)):J.value.length===0?(l(),a("div",Kt,s(e.$t("supplies.noRefunds")),1)):(l(),a("div",Wt,[(l(!0),a(z,null,M(J.value,n=>(l(),a("div",{key:n.id,class:"card flex items-center justify-between"},[t("div",Xt,[t("div",Gt,[t("h3",Ot,s(n.name),1),t("span",{class:A(["text-xs px-2 py-0.5 rounded-full",ie(n.category)])},s(e.$t(`supplies.categories.${n.category}`)),3)]),t("div",Zt,s(e.$t("supplies.restockedBy"))+": "+s(Q(n.lastRestockedByUserId))+" • "+s(K(n.lastRestockedAt)),1),t("div",es,s(P(n.lastRestockAmountPLN))+" PLN ",1)]),d(te).isAdmin?(l(),a("button",{key:0,onClick:W=>$e(n.id),class:"btn btn-primary ml-4"},s(e.$t("supplies.markRefunded")),9,ts)):p("",!0)]))),128)),t("div",ss,[t("div",ns,[t("span",os,s(e.$t("supplies.totalPending"))+":",1),t("span",ls,s(ce.value)+" PLN",1)])])]))])):p("",!0),f.value==="stats"?(l(),a("div",as,[O.value?(l(),a("div",is,s(e.$t("common.loading")),1)):(l(),a("div",us,[t("div",rs,[t("h3",ds,s(e.$t("supplies.spendingByCategory")),1),y.value?.byCategory&&y.value.byCategory.length>0?(l(),a("div",ps,[(l(!0),a(z,null,M(y.value.byCategory,n=>(l(),a("div",{key:n._id,class:"flex items-center justify-between"},[t("div",cs,[t("span",{class:A(["w-3 h-3 rounded-full",Ce(n._id)])},null,2),t("span",ms,s(e.$t(`supplies.categories.${n._id}`)),1)]),t("span",vs,s(P(n.totalSpent))+" PLN",1)]))),128))])):(l(),a("p",ys,s(e.$t("supplies.noData")),1))]),t("div",bs,[t("h3",fs,s(e.$t("supplies.spendingByUser")),1),y.value?.byUser&&y.value.byUser.length>0?(l(),a("div",gs,[(l(!0),a(z,null,M(y.value.byUser,n=>(l(),a("div",{key:n._id,class:"flex items-center justify-between"},[t("span",null,s(Q(n._id)),1),t("span",hs,s(P(n.totalSpent))+" PLN",1)]))),128))])):(l(),a("p",_s,s(e.$t("supplies.noData")),1))]),t("div",$s,[t("h3",ks,s(e.$t("supplies.recentContributions")),1),y.value?.recentContributions&&y.value.recentContributions.length>0?(l(),a("div",ws,[(l(!0),a(z,null,M(y.value.recentContributions,n=>(l(),a("div",{key:n.id,class:"flex items-center justify-between"},[t("div",null,[t("p",null,s(Q(n.userId)),1),t("p",Ps,s(K(n.createdAt)),1)]),t("span",Cs,"+"+s(P(n.amountPLN))+" PLN",1)]))),128))])):(l(),a("p",xs,s(e.$t("supplies.noData")),1))])]))])):p("",!0),N.value?(l(),a("div",{key:3,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:o[17]||(o[17]=x(n=>N.value=!1,["self"]))},[t("div",Ls,[t("div",Ns,[t("h2",Us,s(e.$t("supplies.settingsTitle")),1),t("button",{onClick:o[12]||(o[12]=n=>N.value=!1),class:"text-gray-400 hover:text-white"},[v(d(Z),{class:"w-6 h-6"})])]),t("form",{onSubmit:x(ke,["prevent"]),class:"space-y-4"},[t("div",null,[t("label",Ds,s(e.$t("supplies.weeklyContributionPerPerson")),1),u(t("input",{"onUpdate:modelValue":o[13]||(o[13]=n=>w.value.weeklyContributionPLN=n),type:"number",step:"0.01",required:"",class:"input"},null,512),[[_,w.value.weeklyContributionPLN,void 0,{number:!0}]])]),t("div",null,[t("label",Ss,s(e.$t("supplies.contributionDay")),1),u(t("select",{"onUpdate:modelValue":o[14]||(o[14]=n=>w.value.contributionDay=n),class:"input"},[t("option",As,s(e.$t("supplies.days.monday")),1),t("option",Rs,s(e.$t("supplies.days.tuesday")),1),t("option",Ts,s(e.$t("supplies.days.wednesday")),1),t("option",Es,s(e.$t("supplies.days.thursday")),1),t("option",js,s(e.$t("supplies.days.friday")),1),t("option",Is,s(e.$t("supplies.days.saturday")),1),t("option",Qs,s(e.$t("supplies.days.sunday")),1)],512),[[C,w.value.contributionDay]])]),t("div",null,[t("label",zs,s(e.$t("supplies.manualAdjustment")),1),t("div",Ms,[u(t("input",{"onUpdate:modelValue":o[15]||(o[15]=n=>S.value=n),type:"number",step:"0.01",placeholder:"0.00",class:"input flex-1"},null,512),[[_,S.value,void 0,{number:!0}]]),t("button",{type:"button",onClick:we,class:"btn btn-outline"},s(e.$t("supplies.adjust")),1)]),t("p",Vs,s(e.$t("supplies.adjustmentHint")),1)]),H.value?(l(),a("div",Fs,s(H.value),1)):p("",!0),t("div",qs,[t("button",{type:"submit",disabled:q.value,class:"btn btn-primary flex-1"},s(q.value?e.$t("common.saving"):e.$t("common.save")),9,Bs),t("button",{type:"button",onClick:o[16]||(o[16]=n=>N.value=!1),class:"btn btn-outline"},s(e.$t("common.cancel")),1)])],32)])])):p("",!0),U.value?(l(),a("div",{key:4,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:o[23]||(o[23]=x(n=>U.value=!1,["self"]))},[t("div",Ys,[t("div",Hs,[t("h2",Js,s(e.$t("supplies.restockItem"))+": "+s(k.value?.name),1),t("button",{onClick:o[18]||(o[18]=n=>U.value=!1),class:"text-gray-400 hover:text-white"},[v(d(Z),{class:"w-6 h-6"})])]),t("form",{onSubmit:x(be,["prevent"]),class:"space-y-4"},[t("div",null,[t("label",Ks,s(e.$t("supplies.quantityToAdd")),1),u(t("input",{"onUpdate:modelValue":o[19]||(o[19]=n=>g.value.quantityToAdd=n),type:"number",min:"1",required:"",class:"input",placeholder:"1"},null,512),[[_,g.value.quantityToAdd,void 0,{number:!0}]])]),t("div",null,[t("label",Ws,s(e.$t("supplies.amountSpent"))+" (PLN) - "+s(e.$t("common.optional")),1),u(t("input",{"onUpdate:modelValue":o[20]||(o[20]=n=>g.value.amountPLN=n),type:"number",step:"0.01",min:"0",class:"input",placeholder:"0.00"},null,512),[[_,g.value.amountPLN,void 0,{number:!0}]])]),t("div",Xs,[u(t("input",{"onUpdate:modelValue":o[21]||(o[21]=n=>g.value.needsRefund=n),type:"checkbox",id:"needsRefund",class:"w-5 h-5 rounded border-gray-600 text-purple-600 focus:ring-purple-600 focus:ring-offset-gray-800"},null,512),[[Ue,g.value.needsRefund]]),t("label",Gs,s(e.$t("supplies.needsRefundCheck")),1)]),t("div",Os,[t("button",{type:"submit",disabled:B.value,class:"btn btn-primary flex-1"},s(B.value?e.$t("common.saving"):e.$t("common.confirm")),9,Zs),t("button",{type:"button",onClick:o[22]||(o[22]=n=>U.value=!1),class:"btn btn-outline"},s(e.$t("common.cancel")),1)])],32)])])):p("",!0),D.value?(l(),a("div",{key:5,class:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:o[30]||(o[30]=x(n=>D.value=!1,["self"]))},[t("div",en,[t("div",tn,[t("h2",sn,s(e.$t("supplies.editItem")),1),t("button",{onClick:o[24]||(o[24]=n=>D.value=!1),class:"text-gray-400 hover:text-white"},[v(d(Z),{class:"w-6 h-6"})])]),t("form",{onSubmit:x(he,["prevent"]),class:"space-y-4"},[t("div",null,[t("label",nn,s(e.$t("supplies.itemName")),1),u(t("input",{"onUpdate:modelValue":o[25]||(o[25]=n=>c.value.name=n),type:"text",required:"",class:"input"},null,512),[[_,c.value.name]])]),t("div",null,[t("label",on,s(e.$t("supplies.category")),1),u(t("select",{"onUpdate:modelValue":o[26]||(o[26]=n=>c.value.category=n),class:"input"},[t("option",ln,s(e.$t("supplies.categories.groceries")),1),t("option",an,s(e.$t("supplies.categories.cleaning")),1),t("option",un,s(e.$t("supplies.categories.toiletries")),1),t("option",rn,s(e.$t("supplies.categories.other")),1)],512),[[C,c.value.category]])]),t("div",dn,[t("div",null,[t("label",pn,s(e.$t("supplies.minQty")),1),u(t("input",{"onUpdate:modelValue":o[27]||(o[27]=n=>c.value.minQuantity=n),type:"number",min:"0",required:"",class:"input"},null,512),[[_,c.value.minQuantity,void 0,{number:!0}]])]),t("div",null,[t("label",cn,s(e.$t("supplies.unit")),1),u(t("select",{"onUpdate:modelValue":o[28]||(o[28]=n=>c.value.unit=n),class:"input"},[t("option",mn,s(e.$t("supplies.units.pcs")),1),t("option",vn,s(e.$t("supplies.units.kg")),1),t("option",yn,s(e.$t("supplies.units.L")),1),t("option",bn,s(e.$t("supplies.units.bottles")),1),t("option",fn,s(e.$t("supplies.units.boxes")),1),t("option",gn,s(e.$t("supplies.units.rolls")),1),t("option",hn,s(e.$t("supplies.units.bags")),1),t("option",_n,s(e.$t("supplies.units.jars")),1),t("option",$n,s(e.$t("supplies.units.cans")),1)],512),[[C,c.value.unit]])])]),t("div",kn,[t("button",{type:"submit",disabled:Y.value,class:"btn btn-primary flex-1"},s(Y.value?e.$t("common.saving"):e.$t("common.save")),9,wn),t("button",{type:"button",onClick:o[29]||(o[29]=n=>D.value=!1),class:"btn btn-outline"},s(e.$t("common.cancel")),1)])],32)])])):p("",!0)]))}};export{Dn as default};
